{"version":3,"file":"most-chunksOf.js","sources":["../src/ChunksOfSink.js","../src/index.js"],"sourcesContent":["export class ChunksOfSink {\n  constructor (n, sink) {\n    this.n = n\n    this.sink = sink\n    this.xs = new Array(this.n)\n    this.length = 0\n  }\n\n  event (time, value) {\n    this.xs[this.length++] = value\n\n    if (this.n === this.length) {\n      const chunk = this.xs\n      this.xs = new Array(this.n)\n      this.length = 0\n      this.sink.event(time, chunk)\n    }\n  }\n\n  error (time, err) {\n    return this.sink.error(time, err)\n  }\n\n  end (time, value) {\n    if (this.length > 0) {\n      this.xs.length = this.length;\n      this.sink.event(time, this.xs)\n    }\n    return this.sink.end(time, value)\n  }\n}\n","/** @license MIT License (c) copyright 2016 original author or authors */\n\nimport { ChunksOfSink } from './ChunksOfSink'\nimport { curry2 } from '@most/prelude'\n\nconst chunksOfStream = (n, stream) => new stream.constructor({\n  run: (sink, scheduler) => stream.source.run(new ChunksOfSink(n, sink), scheduler)\n})\n\nexport const chunksOf = curry2(chunksOfStream)\n"],"names":["const","curry2"],"mappings":";;;;;;AAAO,IAAM,YAAY,GAAC,qBACb,EAAE,CAAC,EAAE,IAAI,EAAE;EACtB,IAAM,CAAC,CAAC,GAAG,EAAC;EACZ,IAAM,CAAC,IAAI,GAAG,KAAI;EAClB,IAAM,CAAC,EAAE,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,EAAC;EAC7B,IAAM,CAAC,MAAM,GAAG,EAAC;CAChB,CAAA;;AAEH,uBAAE,KAAK,mBAAE,IAAI,EAAE,KAAK,EAAE;EACpB,IAAM,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,MAAK;;EAEhC,IAAM,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE;IAC5B,IAAQ,KAAK,GAAG,IAAI,CAAC,GAAE;IACvB,IAAM,CAAC,EAAE,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,EAAC;IAC7B,IAAM,CAAC,MAAM,GAAG,EAAC;IACjB,IAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,EAAC;GAC7B;CACF,CAAA;;AAEH,uBAAE,KAAK,mBAAE,IAAI,EAAE,GAAG,EAAE;EAClB,OAAS,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC;CAClC,CAAA;;AAEH,uBAAE,GAAG,iBAAE,IAAI,EAAE,KAAK,EAAE;EAClB,IAAM,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;IACrB,IAAM,CAAC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;IAC/B,IAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,EAAC;GAC/B;EACH,OAAS,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC;CAClC,CAAA;;AC7BH;;AAEA,AAGAA,IAAM,cAAc,GAAG,UAAC,CAAC,EAAE,MAAM,EAAE,SAAG,IAAI,MAAM,CAAC,WAAW,CAAC;EAC3D,GAAG,EAAE,UAAC,IAAI,EAAE,SAAS,EAAE,SAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,SAAS,CAAC,GAAA;CAClF,CAAC,IAAA;;AAEF,AAAOA,IAAM,QAAQ,GAAGC,oBAAM,CAAC,cAAc,CAAC;;;;;;;;;;;;"}